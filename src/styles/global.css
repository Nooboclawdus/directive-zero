@import "tailwindcss";

/* ===== CUSTOM THEME ===== */
@theme {
  --color-bg-primary: #0a0a14;
  --color-bg-secondary: #0f0f1e;
  --color-bg-tertiary: #151528;
  --color-bg-card: #12122066;
  --color-crimson: #e94560;
  --color-crimson-dark: #b8354c;
  --color-crimson-glow: #e9456033;
  --color-cyan: #16c2d9;
  --color-cyan-dark: #0f8f9e;
  --color-cyan-glow: #16c2d933;
  --color-text-primary: #e0e0e8;
  --color-text-secondary: #8888a0;
  --color-text-muted: #555570;
  --color-border: #2a2a40;
  --color-border-bright: #3a3a55;
  --font-heading: 'Orbitron', monospace;
  --font-body: 'Inter', sans-serif;
  --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
}

/* ===== BASE ===== */
html {
  scroll-behavior: smooth;
}

body {
  background-color: var(--color-bg-primary);
  color: var(--color-text-primary);
  font-family: var(--font-body);
  line-height: 1.7;
}

/* Scanline overlay */
body::before {
  content: '';
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0,0,0,0.03) 2px,
    rgba(0,0,0,0.03) 4px
  );
  pointer-events: none;
  z-index: 9999;
}

/* Grid background */
body::after {
  content: '';
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background-image: 
    linear-gradient(rgba(22, 194, 217, 0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(22, 194, 217, 0.03) 1px, transparent 1px);
  background-size: 40px 40px;
  pointer-events: none;
  z-index: -1;
}

/* ===== SELECTION ===== */
::selection {
  background-color: var(--color-crimson);
  color: white;
}

/* ===== SCROLLBAR ===== */
::-webkit-scrollbar {
  width: 8px;
}
::-webkit-scrollbar-track {
  background: var(--color-bg-secondary);
}
::-webkit-scrollbar-thumb {
  background: var(--color-border-bright);
  border-radius: 4px;
}
::-webkit-scrollbar-thumb:hover {
  background: var(--color-crimson);
}

/* ===== CONTENT PROSE ===== */
.prose {
  max-width: 80ch;
}

.prose h1 {
  font-family: var(--font-heading);
  font-size: 2rem;
  font-weight: 700;
  color: var(--color-crimson);
  margin-top: 2.5rem;
  margin-bottom: 1rem;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  border-bottom: 1px solid var(--color-border);
  padding-bottom: 0.5rem;
}

.prose h2 {
  font-family: var(--font-heading);
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--color-cyan);
  margin-top: 2rem;
  margin-bottom: 0.75rem;
  letter-spacing: 0.04em;
}

.prose h3 {
  font-family: var(--font-heading);
  font-size: 1.15rem;
  font-weight: 600;
  color: var(--color-text-primary);
  margin-top: 1.5rem;
  margin-bottom: 0.5rem;
  letter-spacing: 0.03em;
}

.prose h4 {
  font-family: var(--font-heading);
  font-size: 1rem;
  font-weight: 500;
  color: var(--color-cyan);
  margin-top: 1.25rem;
  margin-bottom: 0.5rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-size: 0.85rem;
}

.prose p {
  margin-bottom: 1rem;
  color: var(--color-text-primary);
}

.prose strong {
  color: #ffffff;
  font-weight: 600;
}

.prose a {
  color: var(--color-cyan);
  text-decoration: underline;
  text-underline-offset: 2px;
  transition: color 0.2s;
}
.prose a:hover {
  color: var(--color-crimson);
}

.prose ul, .prose ol {
  margin-bottom: 1rem;
  padding-left: 1.5rem;
}
.prose ul { list-style: disc; }
.prose ol { list-style: decimal; }
.prose li {
  margin-bottom: 0.25rem;
  color: var(--color-text-primary);
}
.prose li::marker {
  color: var(--color-crimson);
}

/* BLOCKQUOTES as classified docs */
.prose blockquote {
  position: relative;
  margin: 1.5rem 0;
  padding: 1rem 1.25rem;
  background: linear-gradient(135deg, #0f0f1e, #0a0a18);
  border-left: 3px solid var(--color-crimson);
  border-radius: 0 4px 4px 0;
  font-family: var(--font-mono);
  font-size: 0.9rem;
  color: var(--color-text-secondary);
  box-shadow: 0 0 20px rgba(233, 69, 96, 0.05);
}
.prose blockquote::before {
  content: '[ CLASSIFIÉ ]';
  display: block;
  font-family: var(--font-heading);
  font-size: 0.65rem;
  color: var(--color-crimson);
  letter-spacing: 0.15em;
  margin-bottom: 0.5rem;
  text-transform: uppercase;
}
.prose blockquote p {
  color: var(--color-text-secondary);
  margin-bottom: 0.5rem;
}
.prose blockquote strong {
  color: var(--color-crimson);
}

/* TABLES */
.prose table {
  width: 100%;
  margin: 1.5rem 0;
  border-collapse: collapse;
  font-size: 0.9rem;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 4px;
  overflow: hidden;
}
.prose thead {
  background: linear-gradient(135deg, #151528, #1a1a30);
}
.prose th {
  font-family: var(--font-heading);
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--color-cyan);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  padding: 0.75rem 1rem;
  text-align: left;
  border-bottom: 2px solid var(--color-crimson);
}
.prose td {
  padding: 0.6rem 1rem;
  border-bottom: 1px solid var(--color-border);
  color: var(--color-text-primary);
}
.prose tr:last-child td {
  border-bottom: none;
}
.prose tr:hover td {
  background: rgba(22, 194, 217, 0.03);
}

/* CODE BLOCKS (terminal style) */
.prose pre {
  margin: 1.5rem 0;
  padding: 1.25rem;
  background: #06060e;
  border: 1px solid var(--color-border);
  border-radius: 4px;
  font-family: var(--font-mono);
  font-size: 0.85rem;
  overflow-x: auto;
  color: #a0ffa0;
  position: relative;
}
.prose pre::before {
  content: '▶ TERMINAL';
  display: block;
  font-family: var(--font-heading);
  font-size: 0.6rem;
  color: var(--color-text-muted);
  letter-spacing: 0.1em;
  margin-bottom: 0.75rem;
  text-transform: uppercase;
}
.prose code {
  font-family: var(--font-mono);
  font-size: 0.875em;
  color: var(--color-cyan);
  background: rgba(22, 194, 217, 0.08);
  padding: 0.15em 0.35em;
  border-radius: 3px;
}
.prose pre code {
  background: none;
  padding: 0;
  color: inherit;
}

/* HORIZONTAL RULES */
.prose hr {
  margin: 2rem 0;
  border: none;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--color-border-bright), transparent);
}

/* ===== RESPONSIVE TABLE WRAPPER ===== */
.table-wrapper {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

/* ===== MOBILE IMPROVEMENTS ===== */
@media (max-width: 640px) {
  .prose {
    font-size: 0.95rem;
  }
  .prose h1 { font-size: 1.5rem; }
  .prose h2 { font-size: 1.25rem; }
  .prose h3 { font-size: 1.1rem; }
  .prose table {
    font-size: 0.8rem;
  }
  .prose th, .prose td {
    padding: 0.35rem 0.5rem;
  }
  .prose blockquote {
    padding: 0.75rem 1rem;
    margin-left: 0;
    margin-right: 0;
  }
  .prose pre {
    margin-left: -1rem;
    margin-right: -1rem;
    border-radius: 0;
  }
}

/* ===== COLLAPSIBLE CHEVRONS ===== */
details[open] > summary .sidebar-chevron {
  transform: rotate(90deg);
}

/* ===== PAGE TRANSITIONS ===== */
.page-transition {
  animation: pageIn 0.35s ease-out;
}
@keyframes pageIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ===== GAUGE EDITABLE INPUTS ===== */
.gauge-editable {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.25rem;
}

.gauge-input {
  width: 2.5rem;
  text-align: center;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--color-border);
  border-radius: 4px;
  color: inherit;
  font-family: var(--font-mono);
  font-size: 1.25rem;
  font-weight: 700;
  padding: 0.15rem 0;
  -moz-appearance: textfield;
  appearance: textfield;
}

.gauge-input::-webkit-outer-spin-button,
.gauge-input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.gauge-input:focus {
  outline: none;
  border-color: var(--color-cyan);
  box-shadow: 0 0 6px var(--color-cyan-glow);
}

.gauge-separator {
  font-weight: 700;
  opacity: 0.5;
  font-size: 1.1rem;
}

/* ===== PRINT ===== */
@media print {
  body::before, body::after { display: none !important; }
  body {
    background: white !important;
    color: black !important;
    font-size: 11pt;
    line-height: 1.5;
  }
  * {
    color: black !important;
    background: transparent !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }
  .no-print, nav, footer, #back-to-top, .toc-wrapper { display: none !important; }
  aside { display: none !important; }
  .prose {
    max-width: 100% !important;
  }
  .prose h1, .prose h2, .prose h3, .prose h4 {
    page-break-after: avoid;
    color: black !important;
  }
  .prose h1 { font-size: 18pt; }
  .prose h2 { font-size: 14pt; border-bottom: 1pt solid #333; padding-bottom: 4pt; }
  .prose h3 { font-size: 12pt; }
  .prose blockquote {
    border-left: 2pt solid #333 !important;
    background: #f5f5f5 !important;
    color: #333 !important;
    padding: 8pt 12pt !important;
  }
  .prose table {
    border-collapse: collapse;
    width: 100%;
  }
  .prose th, .prose td {
    border: 0.5pt solid #666 !important;
    padding: 4pt 8pt !important;
    color: black !important;
  }
  .prose th {
    background: #eee !important;
    font-weight: bold;
  }
  .prose pre {
    border: 0.5pt solid #ccc !important;
    background: #f8f8f8 !important;
    padding: 8pt !important;
    white-space: pre-wrap;
    word-break: break-all;
    page-break-inside: avoid;
  }
  .prose code {
    background: #f0f0f0 !important;
    color: black !important;
  }
  .prose a {
    color: black !important;
    text-decoration: underline !important;
  }
  .prose a[href^="http"]::after {
    content: " (" attr(href) ")";
    font-size: 9pt;
    color: #666 !important;
  }
  .prose img {
    max-width: 100% !important;
    page-break-inside: avoid;
  }
  p, li, blockquote {
    orphans: 3;
    widows: 3;
  }
  h2, h3 {
    page-break-after: avoid;
  }

  /* ===== CHARACTER SHEET PRINT ===== */
  @page {
    size: A4 portrait;
    margin: 12mm 10mm;
  }

  /* Sheet sections: compact, bordered, no break */
  .sheet-section {
    border: 0.5pt solid #999 !important;
    border-radius: 0 !important;
    padding: 6pt 8pt !important;
    margin-bottom: 6pt !important;
    page-break-inside: avoid;
    background: white !important;
  }

  .section-title {
    font-size: 11pt !important;
    font-weight: 700 !important;
    color: black !important;
    border-bottom: 0.5pt solid #ccc !important;
    padding-bottom: 3pt !important;
    margin-bottom: 4pt !important;
  }

  .heading {
    font-size: 16pt !important;
    text-align: center;
    margin-bottom: 8pt !important;
  }

  /* Fields: underline style on paper */
  .field-input {
    border: none !important;
    border-bottom: 0.5pt solid #999 !important;
    border-radius: 0 !important;
    background: transparent !important;
    padding: 1pt 2pt !important;
    font-size: 9pt !important;
    color: black !important;
  }

  .field-label {
    font-size: 7pt !important;
    color: #666 !important;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  /* Gauge boxes */
  .gauge-box {
    border: 0.5pt solid #999 !important;
    border-radius: 0 !important;
    padding: 4pt 6pt !important;
    background: #f9f9f9 !important;
  }

  .gauge-label {
    font-size: 7pt !important;
    text-transform: uppercase;
    color: #666 !important;
  }

  .gauge-value {
    font-size: 14pt !important;
    font-weight: 700 !important;
    color: black !important;
  }

  .gauge-formula {
    font-size: 6pt !important;
    color: #999 !important;
  }

  .gauge-input {
    border: none !important;
    border-bottom: 0.5pt solid #999 !important;
    background: transparent !important;
    color: black !important;
    font-size: 14pt !important;
    width: 2rem !important;
    padding: 0 !important;
  }

  .gauge-separator {
    color: #666 !important;
  }

  /* Skills: compact table layout */
  .text-cyan {
    color: #333 !important;
    font-weight: 700 !important;
  }

  .text-crimson {
    color: black !important;
    font-weight: 700 !important;
  }

  /* Buttons — hide */
  .btn-primary, .btn-secondary {
    display: none !important;
  }

  /* Textarea print */
  textarea.field-input {
    min-height: 60pt !important;
    height: auto !important;
    border: 0.5pt solid #999 !important;
    white-space: pre-wrap;
  }

  /* Skills section: allow page break but keep headers with content */
  .sheet-section:has(.space-y-2) {
    page-break-inside: auto;
  }
  .sheet-section h3 {
    page-break-after: avoid;
  }
}
